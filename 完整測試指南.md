# 排班系統完整測試指南

建立時間：2025-11-20

## ✅ 已完成設定

### 測試資料
已成功在資料庫中設定以下班表需求：

**2025-11-20（今日）**
- 早班：需要 3 人
- 中班：需要 2 人
- 晚班：需要 2 人

**2025-11-21（明日）**
- 早班：需要 4 人
- 中班：需要 3 人

## 測試步驟

### 1. 查看班表資料

1. 開啟瀏覽器：`http://localhost:3000`
2. 點擊左側選單「班表行事曆」
3. 確認行事曆上 11/20 和 11/21 顯示班表需求

### 2. 選擇使用者

1. 點擊左側選單「使用者管理」
2. 在列表中找到 "Jack"
3. 點擊「選擇」按鈕
4. 確認頁面頂部顯示「當前使用者：Jack」

### 3. 預約班別

1. 回到「班表行事曆」頁面
2. 點擊 11/20 日期格子
3. 彈出視窗會顯示：
   - 日期：2025-11-20
   - 當日班表狀態（早/中/晚班的需求與已排人數）
4. 在「選擇班別」下拉選單中選擇「早班」
5. 點擊「確定」按鈕

### 4. 驗證預約結果

1. 預約成功後會顯示成功訊息
2. 行事曆上 11/20 的早班人數會更新為 `1/3`（表示已排 1 人，需求 3 人）
3. 再次點擊 11/20 查看詳細狀態

### 5. 測試不同場景

**場景 A：同一使用者預約多個班別**
- 使用相同使用者預約 11/20 的中班
- 確認可以成功預約（同一天不同班別）

**場景 B：多個使用者預約同一班別**
- 到使用者管理切換到另一個使用者
- 預約 11/20 早班
- 確認人數顯示為 `2/3`

**場景 C：預約已滿的班別**
- 當某班別人數達到需求（如 3/3）
- 系統仍允許預約（顯示為超額）
- 或根據業務邏輯調整

## 預期結果

### 成功案例
- ✅ 行事曆正確顯示班表需求
- ✅ 點擊日期彈出視窗
- ✅ 可以選擇班別並確認
- ✅ 預約後人數即時更新
- ✅ 統計儀表板隨預約更新

### 錯誤處理
- 使用者未選擇時預約 → 提示「請先選擇使用者並登入」
- 重複預約同一班別 → 提示「您已預約該時段」
- 資料載入失敗 → 顯示錯誤訊息

## 常見問題

### Q: 行事曆沒有顯示班表資料？
**A**: 
1. 確認後端 API 正在運行（http://localhost:8080）
2. 開啟瀏覽器開發者工具查看 Network 請求
3. 檢查是否有 API 錯誤

### Q: 點擊日期沒有反應？
**A**:
1. 確認前端已正確載入（沒有 JavaScript 錯誤）
2. 重新整理頁面
3. 清除瀏覽器快取

### Q: 預約失敗？
**A**:
1. 確認已選擇當前使用者
2. 檢查後端 API 日誌
3. 確認資料庫連線正常

## API 測試（可選）

### 查詢月份班表
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/shifts/schedule?month=2025-11" -Method Get
```

### 手動預約班別
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/shifts/book" `
  -Method Post `
  -Headers @{"Content-Type"="application/json"} `
  -Body '{"user_id":3,"date":"2025-11-20","shift_type":"morning"}'
```

## 進階測試

### 壓力測試
- 同時多人預約同一班別
- 短時間內大量預約
- 取消與重新預約

### 邊界條件
- 跨月份查看
- 歷史日期預約
- 未來很遠的日期

### UI/UX 測試
- 響應式設計（調整瀏覽器寬度）
- 側邊欄收合/展開
- 深色/淺色主題適配

## 已知限制

1. **系統設定頁面**：尚未實作（點擊會在 console 顯示訊息）
2. **取消預約功能**：尚未實作前端介面
3. **權限管理**：目前無使用者認證，任何人都可預約

## 後續改進建議

- [ ] 實作取消預約功能
- [ ] 添加預約歷史記錄
- [ ] 實作通知系統
- [ ] 支援批次預約
- [ ] 匯出班表為 Excel
